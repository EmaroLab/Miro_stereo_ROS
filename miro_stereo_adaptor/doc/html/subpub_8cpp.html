<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>miro_stereo_adaptor: subpub.cpp File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_35489869e9df717f3a0c9d0aad81fd73.html">miro_stereo_adaptor</a></li><li class="navelem"><a class="el" href="dir_a0c4afbaa2f8d4693b47a7a0df3d0ab2.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">subpub.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A node to republish the Images, Camera_info and Odometry messages for synchronizing them and supplying frame_id, as well as broadcasting necessary TFs.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;ros/ros.h&gt;</code><br/>
<code>#include &lt;tf/transform_broadcaster.h&gt;</code><br/>
<code>#include &lt;sensor_msgs/CameraInfo.h&gt;</code><br/>
<code>#include &lt;sensor_msgs/Image.h&gt;</code><br/>
<code>#include &lt;nav_msgs/Odometry.h&gt;</code><br/>
<code>#include &lt;pluginlib/class_loader.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for subpub.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="subpub_8cpp__incl.png" border="0" usemap="#subpub_8cpp" alt=""/></div>
<map name="subpub_8cpp" id="subpub_8cpp">
</map>
</div>
</div>
<p><a href="subpub_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSubscribeAndPublish__IMG__l.html">SubscribeAndPublish_IMG_l</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSubscribeAndPublish__IMG__r.html">SubscribeAndPublish_IMG_r</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSubscribeAndPublish__l.html">SubscribeAndPublish_l</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSubscribeAndPublish__odom.html">SubscribeAndPublish_odom</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSubscribeAndPublish__r.html">SubscribeAndPublish_r</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subpub_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6bb1b40e39648e2896557b31eb2becf6"><td class="memItemLeft" align="right" valign="top">ros::Time&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subpub_8cpp.html#a6bb1b40e39648e2896557b31eb2becf6">image_time</a></td></tr>
<tr class="separator:a6bb1b40e39648e2896557b31eb2becf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55886e34bc6a03b24f6ce7455fe67289"><td class="memItemLeft" align="right" valign="top">ros::Time&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subpub_8cpp.html#a55886e34bc6a03b24f6ce7455fe67289">last_time</a></td></tr>
<tr class="separator:a55886e34bc6a03b24f6ce7455fe67289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa78c78a33ff8aacecd1105f94444acd3"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subpub_8cpp.html#aa78c78a33ff8aacecd1105f94444acd3">th</a> = 1.57-1.57/4</td></tr>
<tr class="separator:aa78c78a33ff8aacecd1105f94444acd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ad10b697ecb793e3adce73ef1def012"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subpub_8cpp.html#a8ad10b697ecb793e3adce73ef1def012">th_initial</a> =1.57-1.57/4</td></tr>
<tr class="separator:a8ad10b697ecb793e3adce73ef1def012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af88b946fb90d5f08b5fb740c70e98c10"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subpub_8cpp.html#af88b946fb90d5f08b5fb740c70e98c10">x</a> = 0.0</td></tr>
<tr class="separator:af88b946fb90d5f08b5fb740c70e98c10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab927965981178aa1fba979a37168db2a"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="subpub_8cpp.html#ab927965981178aa1fba979a37168db2a">y</a> = 0.0</td></tr>
<tr class="separator:ab927965981178aa1fba979a37168db2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A node to republish the Images, Camera_info and Odometry messages for synchronizing them and supplying frame_id, as well as broadcasting necessary TFs. </p>
<dl class="section author"><dt>Authors</dt><dd>Parag Khanna, John Thomas </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>11 February 2018</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">...</td><td>Subscribes to: "/miro_scaledimage/left/image_raw" , "/miro_scaledimage/right/image_raw" , "/yaml/left/camera_info" , "/yaml/right/camera_info" and "/odom/miro" <br/>
</td></tr>
  </table>
  </dd>
</dl>
<p>Publishes to: publishes images over : "/stereo/left/image_raw" and "/stereo/right/image_raw", publishes camera_info messages over : "/stereo/left/camera_info/" and "/stereo/right/camera_info/", publish the odometry message over : "/stereo/odom" topic.<br/>
</p>
<p>The node is most important for synchronization. All the MiRo Messages are produced without a header:frame_id, which is very important for stereo processing packages and visualisation packages/softwares. Similarily the time_stamps of images are not necessarily same. So, before Stereo-processing, this takes all incoming messages(Scaled images, Camera_info and Odomerty messages) and republish them by giving the frame_id stereo to images and camera_info messages and same time stamp to all of them (copying the time stamp of the odometry message to distribute them over all others, thus giving priority to the Odometry. Same can also be done by giving the priority to one of the left/right image. Otherwise we can generate new time stamp corresponding to current time.)</p>
<p>For visualisation in Rviz it is necessary to broadcast the tf between miro Body and fixed map frame, and also between Stereo and a Frame on Miro_robot, with respect to which the Point Cloud will be fixed/visualised. </p>

<p>Definition in file <a class="el" href="subpub_8cpp_source.html">subpub.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="subpub_8cpp_source.html#l00282">282</a> of file <a class="el" href="subpub_8cpp_source.html">subpub.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a6bb1b40e39648e2896557b31eb2becf6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::Time image_time</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="subpub_8cpp_source.html#l00036">36</a> of file <a class="el" href="subpub_8cpp_source.html">subpub.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a55886e34bc6a03b24f6ce7455fe67289"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::Time last_time</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="subpub_8cpp_source.html#l00037">37</a> of file <a class="el" href="subpub_8cpp_source.html">subpub.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa78c78a33ff8aacecd1105f94444acd3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double th = 1.57-1.57/4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="subpub_8cpp_source.html#l00040">40</a> of file <a class="el" href="subpub_8cpp_source.html">subpub.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a8ad10b697ecb793e3adce73ef1def012"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double th_initial =1.57-1.57/4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="subpub_8cpp_source.html#l00041">41</a> of file <a class="el" href="subpub_8cpp_source.html">subpub.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="af88b946fb90d5f08b5fb740c70e98c10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double x = 0.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="subpub_8cpp_source.html#l00038">38</a> of file <a class="el" href="subpub_8cpp_source.html">subpub.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab927965981178aa1fba979a37168db2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double y = 0.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="subpub_8cpp_source.html#l00039">39</a> of file <a class="el" href="subpub_8cpp_source.html">subpub.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/miro_stereo_adaptor">miro_stereo_adaptor</a><br />
Author(s): </br />
<small>autogenerated on Wed Feb 21 2018 23:53:53</small>
</div>
</body>
</html>
